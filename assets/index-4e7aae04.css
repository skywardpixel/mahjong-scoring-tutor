:root{--mahjong-red: #d63031;--mahjong-red-soft: #fab1a0;--mahjong-green: #00b894;--mahjong-green-soft: #55efc4;--mahjong-blue: #0984e3;--mahjong-blue-soft: #74b9ff;--mahjong-ivory: #fdcb6e;--mahjong-ivory-soft: #f7f1e3;--primary: #2d3436;--primary-soft: #636e72;--primary-lighter: #b2bec3;--primary-ghost: rgba(45, 52, 54, .05);--success: var(--mahjong-green);--success-soft: var(--mahjong-green-soft);--error: var(--mahjong-red);--error-soft: var(--mahjong-red-soft);--warning: #fdcb6e;--info: var(--mahjong-blue);--background: #fefefe;--background-alt: #f8f9fa;--surface: #ffffff;--surface-elevated: #ffffff;--surface-hover: rgba(45, 52, 54, .02);--surface-pressed: rgba(45, 52, 54, .04);--text-primary: #2d3436;--text-secondary: #636e72;--text-tertiary: #a0a6ab;--text-inverse: #ffffff;--border-light: rgba(45, 52, 54, .08);--border-medium: rgba(45, 52, 54, .12);--border-strong: rgba(45, 52, 54, .24) --shadow-xs: 0 1px 2px rgba(45, 52, 54, .04);--shadow-sm: 0 2px 4px rgba(45, 52, 54, .06);--shadow-md: 0 4px 8px rgba(45, 52, 54, .08), 0 2px 4px rgba(45, 52, 54, .03);--shadow-lg: 0 8px 16px rgba(45, 52, 54, .1), 0 4px 8px rgba(45, 52, 54, .04);--shadow-xl: 0 16px 32px rgba(45, 52, 54, .12), 0 8px 16px rgba(45, 52, 54, .05);--shadow-glow: 0 0 0 1px rgba(45, 52, 54, .04), 0 2px 8px rgba(45, 52, 54, .08);--shadow-focus: 0 0 0 3px rgba(13, 148, 136, .15), 0 2px 8px rgba(45, 52, 54, .08);--radius-xs: 6px;--radius-sm: 8px;--radius-md: 12px;--radius-lg: 16px;--radius-xl: 24px;--radius-full: 999px;--font-size-xs: .75rem;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem;--font-size-xl: 1.333rem;--font-size-2xl: 1.777rem;--font-size-3xl: 2.369rem;--font-size-4xl: 3.157rem;--font-weight-light: 300;--font-weight-normal: 400;--font-weight-medium: 500;--font-weight-semibold: 600;--font-weight-bold: 700;--font-weight-black: 800;--space-1: .25rem;--space-2: .5rem;--space-3: .75rem;--space-4: 1rem;--space-5: 1.25rem;--space-6: 1.5rem;--space-8: 2rem;--space-10: 2.5rem;--space-12: 3rem;--space-16: 4rem;--space-20: 5rem;--ease-linear: cubic-bezier(0, 0, 1, 1);--ease-out: cubic-bezier(0, 0, .2, 1);--ease-in: cubic-bezier(.4, 0, 1, 1);--ease-in-out: cubic-bezier(.4, 0, .2, 1);--ease-bouncy: cubic-bezier(.68, -.55, .265, 1.55);--duration-fast: .15s;--duration-normal: .25s;--duration-slow: .35s}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,system-ui,sans-serif;font-optical-sizing:auto;font-feature-settings:"cv02","cv03","cv04","cv11";font-size:var(--font-size-base);line-height:1.6;font-weight:var(--font-weight-normal);color:var(--text-primary);background:var(--background);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;min-height:100vh;scroll-behavior:smooth}#root{min-height:100vh}.app{min-height:100vh;padding:var(--space-4);max-width:1000px;margin:0 auto;display:flex;flex-direction:column;gap:var(--space-6)}main{flex:1;display:flex;align-items:center;justify-content:center;min-height:0}header{text-align:center;padding:var(--space-8) var(--space-4);position:relative}header:after{content:"";position:absolute;bottom:0;left:50%;transform:translate(-50%);width:var(--space-16);height:3px;background:linear-gradient(90deg,var(--mahjong-red),var(--mahjong-green));border-radius:var(--radius-full)}.app-controls{display:flex;justify-content:space-between;align-items:center;gap:var(--space-6);padding:0 var(--space-2)}.mode-selector{display:flex;gap:var(--space-1);background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-full);padding:var(--space-1);box-shadow:var(--shadow-sm)}.mode-button{background:transparent;color:var(--text-secondary);border:none;padding:var(--space-3) var(--space-6);font-size:var(--font-size-base);font-weight:var(--font-weight-semibold);font-family:inherit;border-radius:var(--radius-full);cursor:pointer;transition:all var(--duration-normal) var(--ease-out);position:relative;overflow:hidden;white-space:nowrap}.mode-button:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:var(--surface-hover);border-radius:inherit;opacity:0;transition:opacity var(--duration-fast) var(--ease-out)}.mode-button:hover:before{opacity:1}.mode-button:hover{color:var(--text-primary);transform:translateY(-1px)}.mode-button.active{background:var(--primary);color:var(--text-inverse);box-shadow:var(--shadow-sm)}.mode-button.active:before{display:none}header h1{font-size:var(--font-size-3xl);font-weight:var(--font-weight-black);margin:0;color:var(--text-primary);letter-spacing:-.025em;line-height:1.2;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary-soft) 100%);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:fadeInUp var(--duration-slow) var(--ease-out)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(var(--space-6))}to{opacity:1;transform:translateY(0)}}.lesson-container{background:var(--surface);border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);border:1px solid var(--border-light);padding:var(--space-12);position:relative;overflow:hidden;animation:slideInScale var(--duration-slow) var(--ease-out)}@keyframes slideInScale{0%{opacity:0;transform:translateY(var(--space-8)) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}.lesson-container:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:radial-gradient(circle at 20% 80%,rgba(214,48,49,.03) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(0,184,148,.03) 0%,transparent 50%),radial-gradient(circle at 40% 40%,rgba(9,132,227,.02) 0%,transparent 50%);border-radius:inherit;pointer-events:none}.lesson-header{text-align:center;margin-bottom:var(--space-12);position:relative;z-index:1}.lesson-title{font-size:var(--font-size-2xl);font-weight:var(--font-weight-bold);color:var(--text-primary);margin-bottom:var(--space-4);letter-spacing:-.02em;line-height:1.3}.lesson-number{font-size:var(--font-size-xs);color:var(--text-secondary);font-weight:var(--font-weight-semibold);text-transform:uppercase;letter-spacing:.15em;background:var(--primary-ghost);border:1px solid var(--border-light);padding:var(--space-2) var(--space-4);border-radius:var(--radius-full);display:inline-block;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.lesson-content{margin-bottom:var(--space-12);position:relative;z-index:1}.lesson-visual{background:var(--background-alt);border:1px solid var(--border-light);border-radius:var(--radius-lg);padding:var(--space-10);text-align:center;font-size:var(--font-size-xl);font-family:inherit;line-height:1.6;margin:var(--space-8) 0;color:var(--text-primary);position:relative;display:block;box-shadow:var(--shadow-md);transition:all var(--duration-normal) var(--ease-out)}.lesson-visual .tile-image{margin:0 var(--space-1)}.lesson-visual:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}.tile-image{height:48px;width:auto;margin:0 var(--space-1);vertical-align:middle;filter:drop-shadow(0 4px 6px rgba(45,52,54,.15));transition:transform var(--duration-fast) var(--ease-out)}.tile-image:hover{transform:scale(1.05)}.lesson-text{font-size:var(--font-size-lg);color:var(--text-primary);text-align:center;margin-bottom:var(--space-8);line-height:1.7;font-weight:var(--font-weight-normal)}.key-point{background:linear-gradient(135deg,var(--success-soft) 8%,var(--surface) 100%);border:1px solid var(--success);border-radius:var(--radius-lg);padding:var(--space-8);margin:var(--space-8) 0;font-weight:var(--font-weight-semibold);color:var(--text-primary);position:relative;box-shadow:var(--shadow-md);overflow:hidden}.key-point:before{content:"ðŸ’¡";position:absolute;top:var(--space-4);right:var(--space-4);font-size:var(--font-size-xl);opacity:.7}.lesson-navigation{display:flex;justify-content:center;gap:var(--space-6);flex-wrap:wrap;position:relative;z-index:1}.button{background:var(--primary);color:var(--text-inverse);border:none;padding:var(--space-4) var(--space-8);font-size:var(--font-size-base);font-weight:var(--font-weight-semibold);font-family:inherit;border-radius:var(--radius-md);cursor:pointer;transition:all var(--duration-normal) var(--ease-out);box-shadow:var(--shadow-glow);min-width:140px;position:relative;overflow:hidden;letter-spacing:.01em;display:inline-flex;align-items:center;justify-content:center;gap:var(--space-2)}.button:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,rgba(255,255,255,.1) 0%,transparent 100%);opacity:0;transition:opacity var(--duration-fast) var(--ease-out)}.button:hover{transform:translateY(-2px) scale(1.02);box-shadow:var(--shadow-xl);background:var(--primary-soft)}.button:hover:before{opacity:1}.button:active{transform:translateY(0) scale(.98);transition:transform var(--duration-fast) var(--ease-in)}.button:disabled{background:var(--border-medium);color:var(--text-tertiary);cursor:not-allowed;transform:none;box-shadow:none}.button:disabled:before{display:none}.button:focus-visible{outline:none;box-shadow:var(--shadow-focus)}.button.secondary{background:var(--surface);color:var(--text-primary);border:1px solid var(--border-medium);box-shadow:var(--shadow-sm)}.button.secondary:hover{background:var(--surface-hover);border-color:var(--border-strong);transform:translateY(-2px) scale(1.02);box-shadow:var(--shadow-lg)}.button.secondary:focus-visible{box-shadow:var(--shadow-focus)}.quiz-container{text-align:center}.quiz-question{font-size:var(--font-size-xl);font-weight:var(--font-weight-bold);color:var(--text-primary);margin-bottom:var(--space-12);line-height:1.5;font-family:inherit;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:var(--space-3)}.quiz-options{display:flex;flex-direction:column;gap:var(--space-4);margin-bottom:var(--space-12);max-width:600px;margin-left:auto;margin-right:auto}.quiz-option{background:var(--surface);border:1px solid var(--border-medium);padding:var(--space-5) var(--space-8);font-size:var(--font-size-lg);font-weight:var(--font-weight-medium);border-radius:var(--radius-lg);cursor:pointer;transition:all var(--duration-normal) var(--ease-out);text-align:left;color:var(--text-primary);position:relative;overflow:hidden;box-shadow:var(--shadow-sm)}.quiz-option:hover{border-color:var(--border-strong);background:var(--surface-hover);transform:translateY(-2px);box-shadow:var(--shadow-md)}.quiz-option.selected{border-color:var(--primary);background:var(--primary-ghost);color:var(--text-primary);transform:translateY(-2px);box-shadow:var(--shadow-md)}.quiz-option.correct{border-color:var(--success);background:linear-gradient(135deg,var(--success-soft) 12%,var(--surface) 100%);color:var(--text-primary);box-shadow:var(--shadow-md)}.quiz-option.incorrect{border-color:var(--error);background:linear-gradient(135deg,var(--error-soft) 12%,var(--surface) 100%);color:var(--text-primary);box-shadow:var(--shadow-md)}.quiz-option.disabled{opacity:.6;cursor:not-allowed;transform:none}.quiz-result{padding:var(--space-8);border-radius:var(--radius-lg);margin:var(--space-10) 0;border:1px solid;box-shadow:var(--shadow-lg);position:relative;overflow:hidden}.quiz-result:before{content:"";position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);pointer-events:none}.quiz-result.correct{background:linear-gradient(135deg,var(--success-soft) 5%,var(--surface) 100%);border-color:var(--success);color:var(--text-primary)}.quiz-result.incorrect{background:linear-gradient(135deg,var(--error-soft) 5%,var(--surface) 100%);border-color:var(--error);color:var(--text-primary)}.quiz-result p{margin:var(--space-3) 0 0 0;font-weight:var(--font-weight-semibold);font-size:var(--font-size-lg);position:relative;z-index:1}.result-icon{font-size:var(--font-size-4xl);display:block;margin-bottom:var(--space-3);position:relative;z-index:1}.quiz-navigation{display:flex;justify-content:center;gap:var(--space-6);flex-wrap:wrap}.lesson-selector{position:relative;display:inline-block}.lesson-selector-toggle{background:var(--surface);color:var(--text-secondary);border:1px solid var(--border-medium);padding:var(--space-3) var(--space-6);font-size:var(--font-size-base);font-weight:var(--font-weight-semibold);font-family:inherit;border-radius:var(--radius-sm);cursor:pointer;transition:all var(--duration-normal) var(--ease-out);box-shadow:var(--shadow-sm)}.lesson-selector-toggle:hover{background:var(--surface-hover);border-color:var(--border-strong);color:var(--text-primary)}.lesson-selector-dropdown{position:absolute;top:100%;left:50%;transform:translate(-50%);width:450px;max-width:90vw;background:var(--surface);border:1px solid var(--border-medium);border-radius:var(--radius-lg);box-shadow:var(--shadow-xl);z-index:1000;margin-top:var(--space-4);max-height:70vh;overflow:hidden;display:flex;flex-direction:column;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.lesson-selector-header{display:flex;justify-content:space-between;align-items:center;padding:var(--space-6) var(--space-8);border-bottom:1px solid var(--border-medium);background:linear-gradient(135deg,var(--surface-elevated) 0%,var(--surface) 100%)}.lesson-selector-header h3{margin:0;font-size:var(--font-size-xl);color:var(--text-primary);font-weight:var(--font-weight-bold)}.close-button{background:var(--surface-hover);border:1px solid var(--border-medium);font-size:var(--font-size-xl);color:var(--text-secondary);cursor:pointer;padding:var(--space-2);width:var(--space-8);height:var(--space-8);display:flex;align-items:center;justify-content:center;border-radius:var(--radius-xs);transition:all var(--duration-normal)}.close-button:hover{background:var(--border-medium);color:var(--text-primary);transform:scale(1.1)}.lesson-list{flex:1;overflow-y:auto;padding:var(--space-4)}.lesson-item{display:flex;align-items:center;padding:var(--space-4) var(--space-6);border-radius:var(--radius-lg);margin-bottom:var(--space-2);transition:all var(--duration-slow) var(--ease-in-out);border:2px solid transparent;position:relative;overflow:hidden}.lesson-item:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.1),transparent);transition:left var(--duration-slow)}.lesson-item.clickable{cursor:pointer}.lesson-item.clickable:hover{background:var(--surface-elevated);border-color:var(--border-medium);transform:translate(4px);box-shadow:var(--shadow-lg)}.lesson-item.clickable:hover:before{left:100%}.lesson-item.current{background:linear-gradient(135deg,var(--mahjong-blue-soft) 8%,var(--surface) 100%);border-color:var(--mahjong-blue);box-shadow:var(--shadow-sm)}.lesson-item.completed{background:linear-gradient(135deg,var(--success-soft) 8%,var(--surface) 100%);border-color:var(--success);box-shadow:var(--shadow-sm)}.lesson-item.locked{opacity:.5;cursor:not-allowed}.lesson-item-icon{font-size:var(--font-size-xl);margin-right:var(--space-4);min-width:var(--space-8);text-align:center}.lesson-item-content{flex:1;text-align:left}.lesson-item-title{font-weight:var(--font-weight-bold);color:var(--text-primary);font-size:var(--font-size-base);line-height:1.4;margin-bottom:var(--space-1)}.lesson-item-type{font-size:var(--font-size-xs);color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em;font-weight:var(--font-weight-semibold)}.lesson-selector-footer{padding:var(--space-6) var(--space-8);border-top:1px solid var(--border-medium);background:linear-gradient(135deg,var(--surface-elevated) 0%,var(--surface) 100%)}.lesson-selector-footer p{margin:0;font-size:var(--font-size-sm);color:var(--text-secondary);text-align:center;font-weight:var(--font-weight-medium)}.practice-mode{max-width:900px;margin:0 auto;animation:slideInScale var(--duration-slow) var(--ease-out)}.practice-header{text-align:center;margin-bottom:var(--space-10);position:relative}.practice-header:after{content:"";position:absolute;bottom:calc(-1 * var(--space-5));left:50%;transform:translate(-50%);width:var(--space-20);height:2px;background:linear-gradient(90deg,var(--mahjong-blue),var(--mahjong-ivory));border-radius:var(--radius-full)}.practice-header h2{font-size:var(--font-size-2xl);font-weight:var(--font-weight-bold);margin-bottom:var(--space-3);color:var(--text-primary);letter-spacing:-.02em}.practice-score{font-size:var(--font-size-lg);color:var(--text-secondary);font-weight:var(--font-weight-medium);display:inline-flex;align-items:center;gap:var(--space-2);background:var(--primary-ghost);padding:var(--space-2) var(--space-4);border-radius:var(--radius-full);border:1px solid var(--border-light)}.practice-problem{background:var(--surface);border-radius:var(--radius-xl);padding:var(--space-10);box-shadow:var(--shadow-lg);border:1px solid var(--border-light);position:relative;overflow:hidden}.practice-problem:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:radial-gradient(circle at 80% 20%,rgba(9,132,227,.02) 0%,transparent 40%),radial-gradient(circle at 20% 80%,rgba(253,203,110,.03) 0%,transparent 40%);pointer-events:none}.problem-hand h3{text-align:center;margin-bottom:var(--space-6);color:var(--text-primary);font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);position:relative;z-index:1}.practice-tiles{margin:var(--space-8) 0;padding:var(--space-8);background:var(--background-alt);border-radius:var(--radius-lg);border:1px solid var(--border-light);font-size:var(--font-size-4xl);line-height:1.2;text-align:center;letter-spacing:var(--space-2);position:relative;z-index:1}.practice-tiles:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:radial-gradient(circle at 50% 50%,rgba(9,132,227,.02) 0%,transparent 60%);border-radius:inherit;pointer-events:none}.problem-conditions{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--space-4);margin:var(--space-8) 0;padding:var(--space-6);background:var(--surface-elevated);border-radius:var(--radius-lg);border:1px solid var(--border-medium)}.condition-item{font-size:var(--font-size-sm);color:var(--text-secondary)}.condition-item strong{color:var(--text-primary);display:block;margin-bottom:var(--space-1)}.answer-inputs{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:var(--space-6);margin:var(--space-8) 0;padding:var(--space-8);background:var(--background-alt);border-radius:var(--radius-lg);border:1px solid var(--border-light);position:relative;z-index:1}.input-group{display:flex;flex-direction:column;gap:var(--space-2)}.input-group label{font-weight:var(--font-weight-semibold);color:var(--text-primary);font-size:var(--font-size-sm);letter-spacing:.01em}.input-group input{padding:var(--space-4);border:1px solid var(--border-medium);border-radius:var(--radius-md);font-size:var(--font-size-lg);font-weight:var(--font-weight-medium);background:var(--surface);color:var(--text-primary);transition:all var(--duration-normal) var(--ease-out);text-align:center}.input-group input:focus{outline:none;border-color:var(--mahjong-blue);box-shadow:var(--shadow-focus);transform:scale(1.02)}.input-group input:hover:not(:focus){border-color:var(--border-strong);box-shadow:var(--shadow-sm)}.practice-actions{display:flex;justify-content:center;gap:var(--space-4);margin:var(--space-8) 0;position:relative;z-index:1}.practice-result{margin-top:var(--space-8);padding:var(--space-8);border-radius:var(--radius-lg);border:1px solid;position:relative;overflow:hidden;animation:slideInScale var(--duration-normal) var(--ease-out)}.practice-result.correct{background:linear-gradient(135deg,var(--success-soft) 5%,transparent 100%),var(--surface);border-color:var(--success);color:var(--text-primary)}.practice-result.correct:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:radial-gradient(circle at 70% 30%,rgba(0,184,148,.08) 0%,transparent 60%);pointer-events:none}.practice-result.incorrect{background:linear-gradient(135deg,var(--warning) 5%,transparent 100%),var(--surface);border-color:var(--warning);color:var(--text-primary)}.practice-result.incorrect:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:radial-gradient(circle at 70% 30%,rgba(253,203,110,.08) 0%,transparent 60%);pointer-events:none}.result-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-6);position:relative;z-index:1}.result-header .result-icon{font-size:var(--font-size-2xl);margin-right:var(--space-2)}.result-header h4{margin:0;font-size:var(--font-size-xl);font-weight:var(--font-weight-bold);flex:1}.result-score-badge{background:var(--primary);color:var(--text-inverse);font-size:var(--font-size-sm);font-weight:var(--font-weight-bold);padding:var(--space-2) var(--space-3);border-radius:var(--radius-full);min-width:var(--space-10);text-align:center}.result-details{margin-bottom:var(--space-6);display:flex;flex-direction:column;gap:var(--space-3);position:relative;z-index:1}.result-item{display:flex;align-items:center;padding:var(--space-4);border-radius:var(--radius-md);border:1px solid;background:var(--surface);transition:all var(--duration-normal) var(--ease-out)}.result-item.correct{border-color:var(--success);background:linear-gradient(135deg,var(--success-soft) 3%,var(--surface) 100%)}.result-item.incorrect{border-color:var(--warning);background:linear-gradient(135deg,var(--warning) 3%,var(--surface) 100%)}.result-item-label{font-weight:var(--font-weight-semibold);font-size:var(--font-size-sm);min-width:var(--space-20);color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em}.result-item-values{flex:1;display:flex;align-items:center;gap:var(--space-3);margin:0 var(--space-4);font-size:var(--font-size-lg);font-weight:var(--font-weight-medium)}.user-answer{color:var(--text-secondary)}.divider{color:var(--text-tertiary);font-weight:var(--font-weight-normal)}.correct-answer{color:var(--text-primary);font-weight:var(--font-weight-semibold)}.result-item-status{font-size:var(--font-size-lg);font-weight:var(--font-weight-bold);min-width:var(--space-6);text-align:center}.result-item.correct .result-item-status{color:var(--success)}.result-item.incorrect .result-item-status{color:var(--error)}.result-explanation{padding-top:var(--space-6);border-top:1px solid var(--border-light);position:relative;z-index:1}.result-explanation h5{margin:0 0 var(--space-3) 0;font-size:var(--font-size-lg);font-weight:var(--font-weight-semibold);color:var(--text-primary)}.result-explanation p{margin:0;line-height:1.7;color:var(--text-secondary);font-size:var(--font-size-base)}@media (max-width: 768px){.app{padding:var(--space-3);gap:var(--space-4)}header{padding:var(--space-6) var(--space-2)}header h1{font-size:var(--font-size-2xl)}.app-controls{flex-direction:column;gap:var(--space-4);padding:0}.mode-selector{justify-content:center;width:100%}.mode-button{flex:1;min-width:0}.lesson-container{padding:var(--space-8) var(--space-6)}.lesson-title{font-size:var(--font-size-xl)}.lesson-visual{padding:var(--space-6) var(--space-4)}.tile-image{height:40px}.button{min-width:0;width:100%;padding:var(--space-4) var(--space-6)}.lesson-navigation{flex-direction:column;gap:var(--space-3)}.lesson-selector-dropdown{width:calc(100vw - var(--space-8));max-width:400px}.practice-problem{padding:var(--space-6) var(--space-4)}.answer-inputs{grid-template-columns:1fr;gap:var(--space-4);padding:var(--space-6)}.practice-actions{flex-direction:column;gap:var(--space-3)}.practice-tiles{font-size:var(--font-size-3xl);padding:var(--space-6);letter-spacing:var(--space-1)}}@media (max-width: 480px){.app{padding:var(--space-2)}.lesson-container{padding:var(--space-6) var(--space-4)}header h1{font-size:var(--font-size-xl)}.problem-conditions{grid-template-columns:1fr;gap:var(--space-3);padding:var(--space-4)}.practice-tiles{font-size:var(--font-size-2xl);padding:var(--space-5);letter-spacing:var(--space-1)}}.completion-screen{text-align:center;max-width:800px;margin:0 auto}.completion-header{margin-bottom:var(--space-12);position:relative;z-index:1}.completion-icon{font-size:var(--font-size-4xl);margin-bottom:var(--space-6);display:block;animation:bounce var(--duration-slow) var(--ease-bouncy)}@keyframes bounce{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}.completion-title{font-size:var(--font-size-3xl);font-weight:var(--font-weight-bold);color:var(--text-primary);margin-bottom:var(--space-3);letter-spacing:-.02em}.completion-subtitle{font-size:var(--font-size-xl);color:var(--text-secondary);font-weight:var(--font-weight-medium);margin:0}.completion-content{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:var(--space-8);margin-bottom:var(--space-12);text-align:left;position:relative;z-index:1}.completion-stats{background:linear-gradient(135deg,var(--success-soft) 8%,var(--surface) 100%);border:1px solid var(--success);border-radius:var(--radius-lg);padding:var(--space-8)}.completion-next-steps{background:linear-gradient(135deg,var(--mahjong-blue-soft) 8%,var(--surface) 100%);border:1px solid var(--mahjong-blue);border-radius:var(--radius-lg);padding:var(--space-8)}.completion-stats h3,.completion-next-steps h3{font-size:var(--font-size-xl);font-weight:var(--font-weight-bold);color:var(--text-primary);margin-bottom:var(--space-6);display:flex;align-items:center;gap:var(--space-2)}.completion-skills{list-style:none;padding:0;margin:0}.completion-skills li{padding:var(--space-2) 0;font-size:var(--font-size-base);color:var(--text-primary);display:flex;align-items:center;gap:var(--space-2)}.completion-next-steps p{margin-bottom:var(--space-4);line-height:1.6;color:var(--text-primary);font-size:var(--font-size-base)}.completion-next-steps p:last-child{margin-bottom:0}.completion-actions{display:flex;justify-content:center;gap:var(--space-4);flex-wrap:wrap;position:relative;z-index:1}@media (hover: none) and (pointer: coarse){.button:hover,.mode-button:hover,.quiz-option:hover{transform:none}.input-group input:focus{transform:none}}
